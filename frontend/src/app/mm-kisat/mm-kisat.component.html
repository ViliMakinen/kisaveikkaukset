<ng-container *ngIf="tournament !== null">
  <div class="main-content-container">
    <div class="title-container">
      {{ tournament.name }}
    </div>
    <ng-container *ngIf="!hasTournamentStarted()">
      <div class="predictions-container">
        <button class="clickable" mat-raised-button (click)="fillPredictions()">T채yt채 veikkaukset</button>
        <button class="clickable" mat-raised-button (click)="unlockPredictions()">Avaa veikkaukset</button>
        <button
          *ngIf="!userService.arePredictionsLocked"
          [class.clickable]="!userService.arePredictionsLocked"
          mat-raised-button
          class="lock-button"
          (click)="lockPredictions()"
          [disabled]="arePredictionsIncomplete()">
          Lukitse veikkaukset
        </button>
        <ng-container *ngIf="arePredictionsIncomplete()">
          <mat-icon matTooltip="T채yt채 kaikki veikkaukset!">info</mat-icon>
        </ng-container>
      </div>
      <mat-divider></mat-divider>
    </ng-container>
    <mat-tab-group>
      <mat-tab [label]="group.name" *ngFor="let group of tournament.groups">
        <div class="match-container">
          <div *ngFor="let match of group.matches" class="match-row">
            <span class="teams">{{ match.home }} - {{ match.away }} </span>
            <span class="match-date">
            <span class="date">{{ match.date | date: 'dd.MM.yyyy' }}</span> <mat-icon>schedule</mat-icon> <span>{{ match.date | date: 'HH:mm' }}</span>
          </span>
            <span>
            <mat-button-toggle-group (change)="savePrediction(match.id, $event.value)" [value]="isSelected(match.id)"
                                     [disabled]="userService.arePredictionsLocked">
              <mat-button-toggle [style.background-color]="arePredictionsCorrect(match.id, '1')"
                                 value="1">1</mat-button-toggle>
              <mat-button-toggle [style.background-color]="arePredictionsCorrect(match.id, 'X')"
                                 value="X">X</mat-button-toggle>
              <mat-button-toggle [style.background-color]="arePredictionsCorrect(match.id, '2')"
                                 value="2">2</mat-button-toggle>
            </mat-button-toggle-group>
          </span>
          </div>
        </div>
        <div class="group-container">
          <h1>Lohkotilanne veikkauksiesi mukaan</h1>
          <div class="group-title-container"><span class="text-margin">Joukkue</span><span
            class="text-margin">Pisteet</span></div>
          <div *ngFor="let team of group.teams" class="group-row">
            <span class="row-box">{{ team.name }}</span>
            <span class="row-box">{{ team.predictedPoints }}</span>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</ng-container>
