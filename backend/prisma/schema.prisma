// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int                    @id @default(autoincrement())
  email         String                 @unique
  name          String
  groups        Group[]
  predictions   UserGroupPredictions[]
}

model UserGroupPredictions {
  userId      Int
  groupId     Int
  predictions Json
  user        User  @relation(fields: [userId], references: [id])
  group       Group @relation(fields: [groupId], references: [id])

  @@unique([userId, groupId])
}

model Group {
  id                   Int                    @id @default(autoincrement())
  code                 String
  participants         User[]
  tournament           Tournament             @relation(fields: [tournamentId], references: [id])
  UserGroupPredictions UserGroupPredictions[]
  tournamentId         Int
}

model Tournament {
  id             Int     @id @default(autoincrement())
  nimi           String
  tournamentData Json
  Group          Group[]
}
